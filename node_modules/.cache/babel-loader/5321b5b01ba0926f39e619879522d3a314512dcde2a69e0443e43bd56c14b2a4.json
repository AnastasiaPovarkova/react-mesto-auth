{"ast":null,"code":"import _defineProperty from\"/Users/nastya/Desktop/Yandex_Practicum/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/nastya/Desktop/Yandex_Practicum/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/nastya/Desktop/Yandex_Practicum/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import*as auth from\"../auth.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(_ref){var handleNotification=_ref.handleNotification;var _useState=useState({password:\"\",email:\"\"}),_useState2=_slicedToArray(_useState,2),formValue=_useState2[0],setFormValue=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAuthLoading=_useState4[0],setIsAuthLoading=_useState4[1];var navigate=useNavigate();function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormValue(_objectSpread(_objectSpread({},formValue),{},_defineProperty({},name,value)));}function handleSubmit(e){e.preventDefault();console.log(formValue);setIsAuthLoading(true);auth.register(formValue.email,formValue.password).then(function(res){if(!res.error){handleNotification(true);navigate(\"/signin\",{replace:true});}else{handleNotification(false);}}).catch(function(err){return console.log(err);}).finally(function(){return setIsAuthLoading(false);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"login login__register\",children:[/*#__PURE__*/_jsxs(\"form\",{name:\"form__login\",className:\"popup__content\",noValidate:true,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"login__title\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"email-field\",className:\"login__field\",value:formValue.email,onChange:handleChange,minLength:\"2\",maxLength:\"50\",required:true,placeholder:\"Email\",name:\"email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"name-field-error login__span\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"password-field\",className:\"login__field\",value:formValue.password,onChange:handleChange,minLength:\"2\",maxLength:\"40\",required:true,placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",name:\"password\"}),/*#__PURE__*/_jsx(\"span\",{className:\"profession-field-error login__span\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login__submit\",name:\"submit\",defaultValue:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\",onSubmit:handleSubmit,children:isAuthLoading?\"Регистрация...\":\"Зарегистрироваться\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login__enter\",children:/*#__PURE__*/_jsx(Link,{to:\"/signin\",className:\"link__reset\",children:\"\\u0423\\u0436\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B? \\u0412\\u043E\\u0439\\u0442\\u0438\"})})]});}export default Register;","map":{"version":3,"names":["React","useState","Link","useNavigate","auth","jsx","_jsx","jsxs","_jsxs","Register","_ref","handleNotification","_useState","password","email","_useState2","_slicedToArray","formValue","setFormValue","_useState3","_useState4","isAuthLoading","setIsAuthLoading","navigate","handleChange","e","_e$target","target","name","value","_objectSpread","_defineProperty","handleSubmit","preventDefault","console","log","register","then","res","error","replace","catch","err","finally","className","children","noValidate","onSubmit","type","id","onChange","minLength","maxLength","required","placeholder","defaultValue","to"],"sources":["/Users/nastya/Desktop/Yandex_Practicum/react-mesto-auth/src/components/Register.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport * as auth from \"../auth.js\";\n\nfunction Register({ handleNotification }) {\n  const [formValue, setFormValue] = useState({\n    password: \"\",\n    email: \"\",\n  });\n\n  const [isAuthLoading, setIsAuthLoading] = useState(false);\n\n  const navigate = useNavigate();\n\n  function handleChange(e) {\n    const { name, value } = e.target;\n    setFormValue({\n      ...formValue,\n      [name]: value,\n    });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    console.log(formValue);\n    setIsAuthLoading(true);\n    auth\n      .register(formValue.email, formValue.password)\n      .then((res) => {\n        if (!res.error) {\n          handleNotification(true);\n          navigate(\"/signin\", { replace: true });\n        } else {\n          handleNotification(false);\n        }\n      })\n      .catch((err) => console.log(err))\n      .finally(() => setIsAuthLoading(false));\n  }\n\n  return (\n    <div className=\"login login__register\">\n      <form\n        name=\"form__login\"\n        className=\"popup__content\"\n        noValidate\n        onSubmit={handleSubmit}\n      >\n        <h2 className=\"login__title\">Регистрация</h2>\n        <input\n          type=\"text\"\n          id=\"email-field\"\n          className=\"login__field\"\n          value={formValue.email}\n          onChange={handleChange}\n          minLength=\"2\"\n          maxLength=\"50\"\n          required\n          placeholder=\"Email\"\n          name=\"email\"\n        />\n        <span className=\"name-field-error login__span\"></span>\n        <input\n          type=\"text\"\n          id=\"password-field\"\n          className=\"login__field\"\n          value={formValue.password}\n          onChange={handleChange}\n          minLength=\"2\"\n          maxLength=\"40\"\n          required\n          placeholder=\"Пароль\"\n          name=\"password\"\n        />\n        <span className=\"profession-field-error login__span\"></span>\n        <button\n          type=\"submit\"\n          className=\"login__submit\"\n          name=\"submit\"\n          defaultValue=\"Зарегистрироваться\"\n          onSubmit={handleSubmit}\n        >\n          {isAuthLoading ? \"Регистрация...\" : \"Зарегистрироваться\"}\n        </button>\n      </form>\n      <div className=\"login__enter\">\n        <Link to=\"/signin\" className=\"link__reset\">\n          Уже зарегистрированы? Войти\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default Register;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}