{"ast":null,"code":"import _defineProperty from\"/Users/nastya/Desktop/Yandex_Practicum/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/nastya/Desktop/Yandex_Practicum/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/nastya/Desktop/Yandex_Practicum/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import*as auth from\"../auth.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var handleLogin=_ref.handleLogin,handleNotification=_ref.handleNotification;var _useState=useState({password:\"\",email:\"\"}),_useState2=_slicedToArray(_useState,2),formValue=_useState2[0],setFormValue=_useState2[1];var navigate=useNavigate();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAuthLoading=_useState4[0],setIsAuthLoading=_useState4[1];var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormValue(_objectSpread(_objectSpread({},formValue),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();if(!formValue.password||!formValue.email){return;}setIsAuthLoading(true);auth.authorize(formValue.password,formValue.email).then(function(data){if(data.token){handleLogin();setFormValue({password:\"\",email:\"\"});navigate(\"/\",{replace:true});}}).catch(function(err){return handleNotification(false);}).finally(function(){return setIsAuthLoading(false);});};return/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"form\",{name:\"form__login\",className:\"popup__content\",noValidate:true,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"login__title\",children:\"\\u0412\\u0445\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"email-field\",className:\"login__field\",value:formValue.email,onChange:handleChange,minLength:\"2\",maxLength:\"50\",required:true,placeholder:\"Email\",name:\"email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"name-field-error login__span\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"password-field\",className:\"login__field\",value:formValue.password,onChange:handleChange,minLength:\"2\",maxLength:\"40\",required:true,placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",name:\"password\"}),/*#__PURE__*/_jsx(\"span\",{className:\"profession-field-error login__span\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login__submit\",name:\"submit\",defaultValue:\"\\u0412\\u043E\\u0439\\u0442\\u0438\",onSubmit:handleSubmit,children:isAuthLoading?\"Вход...\":\"Войти\"})]})});}export default Login;","map":{"version":3,"names":["React","useState","useNavigate","auth","jsx","_jsx","jsxs","_jsxs","Login","_ref","handleLogin","handleNotification","_useState","password","email","_useState2","_slicedToArray","formValue","setFormValue","navigate","_useState3","_useState4","isAuthLoading","setIsAuthLoading","handleChange","e","_e$target","target","name","value","_objectSpread","_defineProperty","handleSubmit","preventDefault","authorize","then","data","token","replace","catch","err","finally","className","children","noValidate","onSubmit","type","id","onChange","minLength","maxLength","required","placeholder","defaultValue"],"sources":["/Users/nastya/Desktop/Yandex_Practicum/react-mesto-auth/src/components/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as auth from \"../auth.js\";\n\nfunction Login({ handleLogin, handleNotification }) {\n  const [formValue, setFormValue] = useState({\n    password: \"\",\n    email: \"\",\n  });\n\n  const navigate = useNavigate();\n\n  const [isAuthLoading, setIsAuthLoading] = useState(false);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n\n    setFormValue({\n      ...formValue,\n      [name]: value,\n    });\n  };\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!formValue.password || !formValue.email) {\n      return;\n    }\n    setIsAuthLoading(true);\n    auth\n      .authorize(formValue.password, formValue.email)\n      .then((data) => {\n        if (data.token) {\n          handleLogin();\n          setFormValue({ password: \"\", email: \"\" });\n          navigate(\"/\", { replace: true });\n        }\n      })\n      .catch((err) => handleNotification(false))\n      .finally(() => setIsAuthLoading(false));\n  };\n\n  return (\n    <div className=\"login\">\n      <form\n        name=\"form__login\"\n        className=\"popup__content\"\n        noValidate\n        onSubmit={handleSubmit}\n      >\n        <h2 className=\"login__title\">Вход</h2>\n        <input\n          type=\"text\"\n          id=\"email-field\"\n          className=\"login__field\"\n          value={formValue.email}\n          onChange={handleChange}\n          minLength=\"2\"\n          maxLength=\"50\"\n          required\n          placeholder=\"Email\"\n          name=\"email\"\n        />\n        <span className=\"name-field-error login__span\"></span>\n        <input\n          type=\"text\"\n          id=\"password-field\"\n          className=\"login__field\"\n          value={formValue.password}\n          onChange={handleChange}\n          minLength=\"2\"\n          maxLength=\"40\"\n          required\n          placeholder=\"Пароль\"\n          name=\"password\"\n        />\n        <span className=\"profession-field-error login__span\"></span>\n        <button\n          type=\"submit\"\n          className=\"login__submit\"\n          name=\"submit\"\n          defaultValue=\"Войти\"\n          onSubmit={handleSubmit}\n        >\n          {isAuthLoading ? \"Вход...\" : \"Войти\"}\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}